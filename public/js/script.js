const _0x1d2196=_0x5a6f;(function(_0x5c5040,_0x1d37f5){const _0x151149=_0x5a6f,_0x36fcee=_0x5c5040();while(!![]){try{const _0x125ab4=parseInt(_0x151149(0x1c0))/0x1+-parseInt(_0x151149(0x151))/0x2+parseInt(_0x151149(0x199))/0x3*(parseInt(_0x151149(0x155))/0x4)+parseInt(_0x151149(0x1c1))/0x5+parseInt(_0x151149(0x1b5))/0x6*(parseInt(_0x151149(0x13a))/0x7)+-parseInt(_0x151149(0x18c))/0x8+-parseInt(_0x151149(0x184))/0x9;if(_0x125ab4===_0x1d37f5)break;else _0x36fcee['push'](_0x36fcee['shift']());}catch(_0x51ddac){_0x36fcee['push'](_0x36fcee['shift']());}}}(_0x2330,0x41b71),document[_0x1d2196(0x1b6)](_0x1d2196(0x15e),function(){setupButtonListeners(),initialize(),setupFileUploadListener();}));function initialize(){const _0x4c3189=_0x1d2196;console[_0x4c3189(0x133)](_0x4c3189(0x165)),clearCategories();}document[_0x1d2196(0x158)]('downloadBtn')['addEventListener'](_0x1d2196(0x140),function(){const _0x4ddf09=_0x1d2196;var _0x27f90b=document[_0x4ddf09(0x163)]('a');_0x27f90b['href']=_0x4ddf09(0x1ab),_0x27f90b['download']=_0x4ddf09(0x1b1),document['body'][_0x4ddf09(0x137)](_0x27f90b),_0x27f90b['click'](),document['body'][_0x4ddf09(0x143)](_0x27f90b);});function setupFileUploadListener(){const _0x4e0413=_0x1d2196,_0x3b10d6=document[_0x4e0413(0x158)](_0x4e0413(0x15f));_0x3b10d6[_0x4e0413(0x181)]=_0x4e0413(0x1b4),_0x3b10d6[_0x4e0413(0x159)]=_0x136243=>{const _0x4ce3dc=_0x4e0413,_0x37c12d=_0x136243[_0x4ce3dc(0x157)]['files'][0x0];if(_0x37c12d){const _0x48db0c=new FileReader();_0x48db0c['onload']=function(_0x54c21c){const _0x44bd94=_0x4ce3dc,_0x482054=_0x54c21c['target']['result'];sessionStorage[_0x44bd94(0x13c)]('categoryData',_0x482054),console[_0x44bd94(0x133)](_0x44bd94(0x18b));const _0x378b7f=JSON['parse'](_0x482054),_0x2b77bf=_0x378b7f[_0x44bd94(0x16b)];console[_0x44bd94(0x133)](_0x44bd94(0x16c));for(const _0x3b3d03 in _0x2b77bf){console[_0x44bd94(0x133)](_0x3b3d03);const _0x46118d=_0x2b77bf[_0x3b3d03];for(const _0x689bfb in _0x46118d){console[_0x44bd94(0x133)](_0x44bd94(0x161)+_0x689bfb);}}},_0x48db0c[_0x4ce3dc(0x176)](_0x37c12d);}};}function uploadTemplateCategories(_0x392ce8){const _0x3ab679=_0x1d2196;_0x392ce8[_0x3ab679(0x19b)]();const _0x131c59=document[_0x3ab679(0x163)](_0x3ab679(0x14f));_0x131c59[_0x3ab679(0x192)]=_0x3ab679(0x131),_0x131c59[_0x3ab679(0x181)]=_0x3ab679(0x1b4),_0x131c59[_0x3ab679(0x159)]=_0x1933fd=>{const _0x461e7d=_0x3ab679,_0x2edfab=_0x1933fd[_0x461e7d(0x157)][_0x461e7d(0x16e)][0x0];if(_0x2edfab){const _0x31ae85=new FileReader();_0x31ae85[_0x461e7d(0x1a2)]=function(_0xffceb){const _0x410b0a=_0x461e7d,_0x282295=_0xffceb[_0x410b0a(0x157)][_0x410b0a(0x16d)];sessionStorage['setItem']('categoryData',_0x282295),console[_0x410b0a(0x133)](_0x410b0a(0x18b));const _0x481056=JSON[_0x410b0a(0x18e)](_0x282295),_0x430908=_0x481056[_0x410b0a(0x16b)];console[_0x410b0a(0x133)](_0x410b0a(0x16c));for(const _0x4e848a in _0x430908){console[_0x410b0a(0x133)](_0x4e848a);const _0x260713=_0x430908[_0x4e848a];for(const _0x1d8711 in _0x260713){console[_0x410b0a(0x133)](_0x410b0a(0x161)+_0x1d8711);}}},_0x31ae85['readAsText'](_0x2edfab);}},_0x131c59[_0x3ab679(0x140)]();}function displayError(_0x57a6bb){const _0x3b0066=_0x1d2196,_0x4c12a2=document[_0x3b0066(0x158)](_0x3b0066(0x17a)),_0x3966f5=document[_0x3b0066(0x163)]('li');_0x3966f5['className']=_0x3b0066(0x156),_0x3966f5[_0x3b0066(0x139)]=_0x3b0066(0x1af)+_0x57a6bb,_0x4c12a2[_0x3b0066(0x137)](_0x3966f5);}function setupButtonListeners(){const _0x413564=_0x1d2196,_0x19aba0=document[_0x413564(0x158)](_0x413564(0x195));_0x19aba0&&_0x19aba0[_0x413564(0x1b6)](_0x413564(0x140),function(){const _0x4ce9c1=_0x413564;console[_0x4ce9c1(0x133)](_0x4ce9c1(0x1a9)),initiateCategoryProcess();});const _0x441279=document[_0x413564(0x158)]('clearCategories');_0x441279&&_0x441279[_0x413564(0x1b6)]('click',function(){clearCategories();});const _0x49f286=document['getElementById'](_0x413564(0x14c));_0x49f286&&_0x49f286[_0x413564(0x1b6)](_0x413564(0x140),function(){const _0xa5198f=_0x413564;fetch('data/example_categorization_template.json')[_0xa5198f(0x13b)](_0xdca185=>{const _0x5f46a9=_0xa5198f;if(!_0xdca185['ok'])throw new Error(_0x5f46a9(0x152));return _0xdca185[_0x5f46a9(0x134)]();})[_0xa5198f(0x13b)](_0x54bad8=>{const _0x597973=_0xa5198f;sessionStorage[_0x597973(0x13c)](_0x597973(0x154),JSON['stringify'](_0x54bad8)),console[_0x597973(0x133)](_0x597973(0x14e)),console['log'](_0x597973(0x191));for(const _0x433b76 in _0x54bad8['Categories']){console['log'](_0x433b76);const _0x373b7c=_0x54bad8[_0x597973(0x16b)][_0x433b76];for(const _0x6f07d4 in _0x373b7c){console[_0x597973(0x133)](_0x597973(0x161)+_0x6f07d4);}}alert(_0x597973(0x19a));})['catch'](_0x65cd06=>{const _0x1cc878=_0xa5198f;console[_0x1cc878(0x138)]('Error\x20fetching\x20example\x20data:',_0x65cd06);});});}function copyToClipboard(){const _0x2b957f=_0x1d2196,_0x2ca277=document[_0x2b957f(0x160)](_0x2b957f(0x1b2))[_0x2b957f(0x139)];navigator['clipboard'][_0x2b957f(0x167)](_0x2ca277)[_0x2b957f(0x13b)](()=>{const _0xdc9b79=_0x2b957f;document[_0xdc9b79(0x158)](_0xdc9b79(0x179))[_0xdc9b79(0x187)]=_0x2ca277;})['catch'](_0x532be1=>{console['error']('Failed\x20to\x20copy:\x20',_0x532be1);});}function clearCategories(){const _0x361d83=_0x1d2196,_0x428d46=document[_0x361d83(0x158)](_0x361d83(0x17a));_0x428d46?_0x428d46[_0x361d83(0x1a6)]='':console[_0x361d83(0x138)]('Elemento\x20categoryList\x20no\x20encontrado.');const _0x13f2ab=document[_0x361d83(0x160)]('.results-section');if(_0x13f2ab){_0x13f2ab[_0x361d83(0x1a6)]='';const _0x3b5372=document[_0x361d83(0x163)]('h2');_0x3b5372[_0x361d83(0x139)]=_0x361d83(0x141),_0x13f2ab['appendChild'](_0x3b5372);const _0x5aee4c=document[_0x361d83(0x163)](_0x361d83(0x15b));_0x5aee4c['className']=_0x361d83(0x1bf),_0x5aee4c[_0x361d83(0x1a6)]=_0x361d83(0x17b),_0x13f2ab[_0x361d83(0x137)](_0x5aee4c);}else console[_0x361d83(0x138)]('Elemento\x20results-section\x20no\x20encontrado.');}function initiateCategoryProcess(){const _0x5a0746=_0x1d2196,_0x4be71b=document[_0x5a0746(0x158)](_0x5a0746(0x179))[_0x5a0746(0x187)][_0x5a0746(0x145)]();sessionStorage[_0x5a0746(0x13c)](_0x5a0746(0x1be),_0x4be71b);if(!_0x4be71b){alert('Please\x20describe\x20your\x20item.');return;}const _0x4e4693=sessionStorage[_0x5a0746(0x13e)]('categoryData');if(!_0x4e4693){alert(_0x5a0746(0x175));return;}const _0x164e94=JSON[_0x5a0746(0x18e)](_0x4e4693);if(_0x164e94&&_0x164e94['Categories']){const _0x167001=Object[_0x5a0746(0x19f)](_0x164e94[_0x5a0746(0x16b)]),_0x5c1fb3=createCategoryPrompt(_0x4be71b,_0x167001);sendCategoryMessageToServer(_0x5c1fb3);}else alert(_0x5a0746(0x171));}function createCategoryPrompt(_0x5b2e41,_0xec46ac){const _0x953f40=_0x1d2196;let _0x4833b5=_0x953f40(0x19c);return _0x4833b5+='Description:\x20\x22'+_0x5b2e41+_0x953f40(0x166),_0x4833b5+=_0x953f40(0x1a0)+_0xec46ac[_0x953f40(0x16f)](',\x20')+'.\x0a',_0x4833b5+=_0x953f40(0x194),_0x4833b5;}function _0x2330(){const _0x210fe4=['La\x20estructura\x20de\x20la\x20respuesta\x20no\x20contiene\x20los\x20campos\x20esperados.','DOMContentLoaded','file-upload','querySelector','\x20\x20-\x20','No\x20se\x20encontraron\x20subcategorías\x20para\x20la\x20categoría\x20seleccionada.','createElement','\x22\x20and\x20user\x27s\x20description\x20\x22','Initialization\x20complete.','\x22.\x0a','writeText','style','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','item-descriptions-container','Categories','Categorías\x20y\x20Subcategorías:','result','files','join','Contenido\x20del\x20mensaje\x20de\x20la\x20respuesta:','No\x20categories\x20found\x20in\x20the\x20uploaded\x20JSON.','Item\x20Descriptions:\x20','Respond\x20only\x20with\x20the\x20subcategory\x20name.\x0a','Data\x20recibida\x20del\x20servidor:','No\x20category\x20data\x20found.\x20Please\x20upload\x20a\x20JSON\x20file\x20first.','readAsText','replace','currentCategory','userNeeds','categoryList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-box\x22\x20id=\x22userItem\x22><h3>User\x20Description</h3></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-box\x22\x20id=\x22matchedItem\x22><h3>Matched\x20Item</h3></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Selected\x20subcategory\x20by\x20ChatGPT:','\x22\x20and\x20the\x20initial\x20description\x20provided\x20(\x22','item-box','name','POST','accept','category-title\x20chatgpt-response','\x22><strong>Subcategory:</strong>\x20','4970754jHVwZU','Subcategories\x20sent\x20to\x20ChatGPT:','category-title','value','User\x20Description','find','Items','Archivo\x20JSON\x20subido\x20y\x20almacenado\x20correctamente.','332832VnwCLH','tags','parse','\x22><strong>Tags:</strong>\x20','#888','Categorías\x20y\x20Subcategorías\x20del\x20Ejemplo:','type','Respond\x20only\x20with\x20the\x20description\x20or\x20a\x20brief\x20identifier.\x0a','Please\x20ensure\x20your\x20response\x20contains\x20only\x20the\x20category\x20name\x20or\x20an\x20error\x20message\x20as\x20specified.\x0a','startExploration','map','Matched\x20item\x20not\x20found.','</p>\x0a\x20\x20\x20\x20','321rBVbaS','Example\x20data\x20loaded\x20successfully!','preventDefault','Based\x20on\x20the\x20description\x20provided,\x20please\x20choose\x20the\x20most\x20appropriate\x20category\x20from\x20the\x20list\x20below.\x20Respond\x20with\x20only\x20the\x20name\x20of\x20the\x20selected\x20category\x20exactly\x20as\x20it\x20appears,\x20even\x20if\x20it\x20contains\x20typos\x20or\x20errors.\x20If\x20the\x20description\x20matches\x20multiple\x20categories\x20equally,\x20choose\x20the\x20one\x20that\x20best\x20represents\x20the\x20primary\x20context\x20of\x20the\x20description.\x20If\x20no\x20category\x20is\x20appropriate,\x20begin\x20your\x20response\x20with\x20\x22ERROR:\x22\x20followed\x20by\x20your\x20reason.\x0a','Selected\x20item\x20description\x20by\x20ChatGPT:','item-description','keys','Categories:\x20','\x27.\x0a','onload','The\x20text\x20in\x20gray\x20are\x20suggestions\x20from\x20ChatGPT\x20to\x20help\x20label\x20with\x20meta-descriptive\x20elements.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>','innerHTML','Información\x20necesaria\x20no\x20disponible','message','Click\x20registrado','No\x20JSON\x20data\x20found.','data/empty_categorization_template.json','ERROR:','.results-section','startsWith','Error:\x20','Respuesta\x20del\x20servidor:\x20','empty_categorization_template.json','.example-text','Detalles\x20del\x20ítem\x20seleccionado\x20no\x20disponibles','.json','2268wFRjjw','addEventListener','Error\x20al\x20procesar\x20tu\x20solicitud:\x20','You\x20are\x20assisting\x20in\x20navigating\x20a\x20web\x20application\x20that\x20categorizes\x20items.\x20Based\x20on\x20the\x20selected\x20category\x20\x22','Please\x20provide\x20a\x20suitable\x20name\x20for\x20the\x20following\x20item\x20description:\x20\x22','Subcategories:\x20','catch','Categories\x20sent\x20to\x20ChatGPT:','category-content\x20chatgpt-response','currentDescription','comparison-container','33404VUjxkw','77095IVEtZF','description','forEach','Datos\x20de\x20categoría\x20no\x20encontrados.','Descripciones\x20de\x20ítems:','color:\x20black;','file','Item\x20descriptions\x20sent\x20to\x20ChatGPT:','log','json','stringify','No\x20valid\x20category\x20found.','appendChild','error','textContent','7147bBAbIf','then','setItem','currentSubcategory','getItem','/api/chat','click','Classification\x20Results','\x22><strong>Category:</strong>\x20','removeChild','<strong>Based\x20on\x20your\x20initial\x20description\x20of\x20the\x20new\x20item,\x20ChatGPT\x20has\x20identified\x20the\x20most\x20similar\x20item\x20in\x20your\x20uploaded\x20collection:</strong>','trim','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22','Error\x20processing\x20your\x20request:','\x22><strong>Name:</strong>\x20','No\x20se\x20encontraron\x20ítems\x20para\x20la\x20subcategoría\x20seleccionada:','split','content','loadExample','className','Example\x20JSON\x20data\x20loaded\x20and\x20stored\x20successfully.','input','application/json','213150bBrjBT','Network\x20response\x20was\x20not\x20ok','choices','categoryData','19996GdgPlb','error-message','target','getElementById','onchange','bold','div','Elemento\x20con\x20ID\x20\x22categoryList\x22\x20no\x20encontrado.'];_0x2330=function(){return _0x210fe4;};return _0x2330();}function sendCategoryMessageToServer(_0x236378){const _0xbf7214=_0x1d2196;console['log']('Enviando\x20mensaje\x20al\x20servidor:\x20',_0x236378),fetch('/api/chat',{'method':'POST','headers':{'Content-Type':_0xbf7214(0x150)},'body':JSON['stringify']({'message':_0x236378})})[_0xbf7214(0x13b)](_0x3eeab9=>_0x3eeab9[_0xbf7214(0x134)]())[_0xbf7214(0x13b)](_0x278890=>{const _0x4456ae=_0xbf7214;console[_0x4456ae(0x133)](_0x4456ae(0x1b0),_0x278890);const _0x5a6b1e=getSelectedCategory(_0x278890);_0x5a6b1e?(sessionStorage[_0x4456ae(0x13c)](_0x4456ae(0x178),_0x5a6b1e),processCategory(_0x5a6b1e,_0x236378)):displayError(_0x4456ae(0x136));})['catch'](_0xefebae=>{const _0x34d307=_0xbf7214;console[_0x34d307(0x138)](_0x34d307(0x1b7)+_0xefebae);});}function getSelectedCategory(_0x3355dd){const _0x46040e=_0x1d2196;console[_0x46040e(0x133)](_0x46040e(0x174),_0x3355dd);if(_0x3355dd[_0x46040e(0x153)]&&_0x3355dd[_0x46040e(0x153)][0x0]&&_0x3355dd[_0x46040e(0x153)][0x0]['message']&&_0x3355dd[_0x46040e(0x153)][0x0][_0x46040e(0x1a8)][_0x46040e(0x14b)]){const _0x31b7da=_0x3355dd[_0x46040e(0x153)][0x0][_0x46040e(0x1a8)]['content'];return console[_0x46040e(0x133)](_0x46040e(0x170),_0x31b7da),_0x31b7da[_0x46040e(0x1ae)](_0x46040e(0x1ac))?(displayError(_0x31b7da),null):_0x31b7da;}else console['log'](_0x46040e(0x15d));return null;}function processCategory(_0x23b850,_0x7b544){const _0x122506=_0x1d2196,_0xb5fe64=sessionStorage[_0x122506(0x13e)]('categoryData');if(!_0xb5fe64){console['error'](_0x122506(0x12e));return;}const _0x169800=JSON[_0x122506(0x18e)](_0xb5fe64),_0x3dff22=_0x169800[_0x122506(0x16b)][_0x23b850];_0x3dff22?(displayChatGPTResponseCategory(_0x23b850,_0x7b544),initiateSubcategoryProcess(_0x23b850)):displayError('No\x20se\x20encontraron\x20subcategorías\x20para\x20la\x20categoría\x20seleccionada.');}function _0x5a6f(_0x4b58e6,_0x483f65){const _0x233043=_0x2330();return _0x5a6f=function(_0x5a6fda,_0x21b399){_0x5a6fda=_0x5a6fda-0x12e;let _0x1eb663=_0x233043[_0x5a6fda];return _0x1eb663;},_0x5a6f(_0x4b58e6,_0x483f65);}function displayChatGPTResponseCategory(_0x4cc859,_0x42f242){const _0x5c978e=_0x1d2196,_0x1f08d5=document[_0x5c978e(0x158)](_0x5c978e(0x17a));if(!_0x1f08d5){console[_0x5c978e(0x138)](_0x5c978e(0x15c));return;}const _0x126234=_0x42f242[_0x5c978e(0x14a)]('\x0a')[0x2][_0x5c978e(0x177)](_0x5c978e(0x1a0),''),_0x2200da=document[_0x5c978e(0x163)]('p');_0x2200da[_0x5c978e(0x14d)]=_0x5c978e(0x186),_0x2200da['textContent']=_0x5c978e(0x1bc),_0x1f08d5[_0x5c978e(0x137)](_0x2200da);const _0x578629=document[_0x5c978e(0x163)]('p');_0x578629[_0x5c978e(0x139)]=_0x126234,_0x1f08d5['appendChild'](_0x578629);const _0xc55265=document[_0x5c978e(0x163)]('p');_0xc55265[_0x5c978e(0x14d)]=_0x5c978e(0x182),_0xc55265[_0x5c978e(0x139)]='Selected\x20category\x20by\x20ChatGPT:',_0x1f08d5[_0x5c978e(0x137)](_0xc55265);const _0x5a9860=document['createElement']('p');_0x5a9860[_0x5c978e(0x14d)]='category-content\x20chatgpt-response',_0x5a9860[_0x5c978e(0x139)]=_0x4cc859,_0x1f08d5[_0x5c978e(0x137)](_0x5a9860);}function initiateSubcategoryProcess(_0x5b5def){const _0x38de89=_0x1d2196,_0x18c690=sessionStorage[_0x38de89(0x13e)]('categoryData');if(!_0x18c690){console['error'](_0x38de89(0x12e));return;}const _0x54eaa8=JSON[_0x38de89(0x18e)](_0x18c690),_0x316ede=_0x54eaa8[_0x38de89(0x16b)][_0x5b5def];if(_0x316ede){const _0x32fcb2=Object[_0x38de89(0x19f)](_0x316ede),_0x4d3c32=sessionStorage[_0x38de89(0x13e)]('currentDescription'),_0x1c2ba6=createSubcategoryPrompt(_0x5b5def,_0x32fcb2,_0x4d3c32);sendSubcategoryMessageToServer(_0x1c2ba6,_0x5b5def);}else console[_0x38de89(0x138)](_0x38de89(0x162));}function createSubcategoryPrompt(_0x45dfb2,_0x12fd34,_0xb2917c){const _0x203425=_0x1d2196;let _0x391aa8=_0x12fd34[0x0],_0x50f062=_0x203425(0x1b8)+_0x45dfb2+_0x203425(0x17d)+_0xb2917c+'\x22),\x20please\x20choose\x20the\x20most\x20appropriate\x20subcategory\x20from\x20the\x20list\x20below.\x20If\x20the\x20description\x20applies\x20equally\x20across\x20multiple\x20subcategories\x20or\x20if\x20there\x20is\x20insufficient\x20context\x20to\x20distinguish\x20them,\x20default\x20to\x20selecting\x20\x27'+_0x391aa8+_0x203425(0x1a1);return _0x50f062+=_0x203425(0x1ba)+_0x12fd34['join'](',\x20')+'.\x0a',_0x50f062+=_0x203425(0x173),_0x50f062;}function sendSubcategoryMessageToServer(_0x4bbd59,_0x171585){const _0x52e131=_0x1d2196;fetch('/api/chat',{'method':_0x52e131(0x180),'headers':{'Content-Type':_0x52e131(0x150)},'body':JSON[_0x52e131(0x135)]({'message':_0x4bbd59})})[_0x52e131(0x13b)](_0x171503=>_0x171503[_0x52e131(0x134)]())['then'](_0x185ba9=>{const _0x5eb2fe=_0x52e131,_0x34a634=getSelectedCategory(_0x185ba9);_0x34a634?(sessionStorage['setItem'](_0x5eb2fe(0x13d),_0x34a634),processSubcategory(_0x171585,_0x34a634,_0x4bbd59)):displayError('Subcategoría\x20válida\x20no\x20encontrada.');})[_0x52e131(0x1bb)](_0x5e47d7=>{const _0x208913=_0x52e131;console['error'](_0x208913(0x1b7)+_0x5e47d7);});}function processSubcategory(_0x195ec3,_0x406cbc,_0x1b3e3b){displayChatGPTResponseSubcategory(_0x406cbc,_0x1b3e3b),initiateItemDescriptionProcess(_0x195ec3,_0x406cbc);}function displayChatGPTResponseSubcategory(_0x40dc94,_0x21661b){const _0x2b5775=_0x1d2196,_0x2fc4c3=document[_0x2b5775(0x158)](_0x2b5775(0x17a));if(!_0x2fc4c3){console[_0x2b5775(0x138)](_0x2b5775(0x15c));return;}const _0x4c33c0=_0x21661b[_0x2b5775(0x14a)]('\x0a')[0x1][_0x2b5775(0x177)](_0x2b5775(0x1ba),''),_0x48220d=document[_0x2b5775(0x163)]('p');_0x48220d['className']='category-title',_0x48220d[_0x2b5775(0x139)]=_0x2b5775(0x185),_0x2fc4c3['appendChild'](_0x48220d);const _0x3746be=document[_0x2b5775(0x163)]('p');_0x3746be['textContent']=_0x4c33c0,_0x2fc4c3[_0x2b5775(0x137)](_0x3746be);const _0x5e4c84=document[_0x2b5775(0x163)]('p');_0x5e4c84['className']=_0x2b5775(0x182),_0x5e4c84[_0x2b5775(0x139)]=_0x2b5775(0x17c),_0x2fc4c3[_0x2b5775(0x137)](_0x5e4c84);const _0x3c1979=document[_0x2b5775(0x163)]('p');_0x3c1979[_0x2b5775(0x14d)]='category-content\x20chatgpt-response',_0x3c1979[_0x2b5775(0x139)]=_0x40dc94,_0x2fc4c3[_0x2b5775(0x137)](_0x3c1979);}function initiateItemDescriptionProcess(_0x5b5e1a,_0x159be7){const _0x3a1cf4=_0x1d2196,_0x59426e=sessionStorage['getItem'](_0x3a1cf4(0x154));if(!_0x59426e){console[_0x3a1cf4(0x138)](_0x3a1cf4(0x12e));return;}const _0x26f7b4=JSON[_0x3a1cf4(0x18e)](_0x59426e),_0x3ea4ca=_0x26f7b4[_0x3a1cf4(0x16b)][_0x5b5e1a]?.[_0x159be7]?.['Items'];if(_0x3ea4ca){const _0x2b16f5=_0x3ea4ca[_0x3a1cf4(0x196)](_0x49c94e=>_0x49c94e[_0x3a1cf4(0x1c2)]);console[_0x3a1cf4(0x133)](_0x3a1cf4(0x12f),_0x2b16f5);const _0x3e3999=sessionStorage[_0x3a1cf4(0x13e)](_0x3a1cf4(0x1be)),_0x247944=createItemDescriptionPrompt(_0x159be7,_0x2b16f5,_0x3e3999);sendItemDescriptionMessageToServer(_0x247944,_0x159be7);}else console[_0x3a1cf4(0x138)](_0x3a1cf4(0x149),_0x159be7);}function createItemDescriptionPrompt(_0x499fe0,_0x22a687,_0x3b20da){const _0x1b96de=_0x1d2196;let _0x16cae7='Based\x20on\x20the\x20selected\x20subcategory\x20\x22'+_0x499fe0+_0x1b96de(0x164)+_0x3b20da+'\x22,\x20please\x20choose\x20the\x20most\x20relevant\x20item\x20from\x20the\x20descriptions\x20below.\x0a';return _0x16cae7+='Item\x20Descriptions:\x20'+_0x22a687[_0x1b96de(0x16f)](',\x20')+'.\x0a',_0x16cae7+=_0x1b96de(0x193),_0x16cae7;}function sendItemDescriptionMessageToServer(_0x37f6e8,_0x3b6288){const _0x514518=_0x1d2196;fetch(_0x514518(0x13f),{'method':_0x514518(0x180),'headers':{'Content-Type':_0x514518(0x150)},'body':JSON[_0x514518(0x135)]({'message':_0x37f6e8})})[_0x514518(0x13b)](_0x1c1a22=>_0x1c1a22['json']())[_0x514518(0x13b)](_0x394b70=>{const _0x4bbef2=getSelectedItemDescription(_0x394b70);_0x4bbef2?(displayItemDescriptionResponse(_0x4bbef2,_0x37f6e8),displayClassificationResults(_0x4bbef2)):displayError('Descripción\x20de\x20ítem\x20válida\x20no\x20encontrada.');})['catch'](_0x224c2c=>{const _0x186119=_0x514518;console[_0x186119(0x138)](_0x186119(0x1b7)+_0x224c2c);});}function getSelectedItemDescription(_0x17d34b){const _0x3383d8=_0x1d2196;if(_0x17d34b[_0x3383d8(0x153)]&&_0x17d34b[_0x3383d8(0x153)][0x0]&&_0x17d34b[_0x3383d8(0x153)][0x0][_0x3383d8(0x1a8)]&&_0x17d34b[_0x3383d8(0x153)][0x0]['message'][_0x3383d8(0x14b)]){const _0x378df1=_0x17d34b[_0x3383d8(0x153)][0x0][_0x3383d8(0x1a8)][_0x3383d8(0x14b)];return _0x378df1[_0x3383d8(0x1ae)](_0x3383d8(0x1ac))?(displayError(_0x378df1),null):_0x378df1;}return null;}function displayItemDescriptionResponse(_0x4a4f30,_0x433a35){const _0x156268=_0x1d2196,_0x20df40=document['getElementById'](_0x156268(0x17a));if(!_0x20df40){console[_0x156268(0x138)](_0x156268(0x15c));return;}const _0x4f8ac3=_0x433a35['split']('\x0a')[0x1][_0x156268(0x177)](_0x156268(0x172),'')['split']('.,'),_0xc97a0=document[_0x156268(0x163)]('p');_0xc97a0[_0x156268(0x14d)]=_0x156268(0x186),_0xc97a0[_0x156268(0x139)]=_0x156268(0x132),_0x20df40[_0x156268(0x137)](_0xc97a0);const _0x52ffc1=document[_0x156268(0x163)](_0x156268(0x15b));_0x52ffc1[_0x156268(0x14d)]=_0x156268(0x16a),_0x4f8ac3[_0x156268(0x1c3)](_0x3bf9c6=>{const _0x20c2d6=_0x156268;if(_0x3bf9c6['trim']()!==''){const _0x14c1c1=document['createElement']('p');_0x14c1c1['className']=_0x20c2d6(0x19e),_0x14c1c1[_0x20c2d6(0x139)]='\x22'+_0x3bf9c6['trim']()+'.\x22',_0x52ffc1[_0x20c2d6(0x137)](_0x14c1c1);}}),_0x20df40[_0x156268(0x137)](_0x52ffc1);const _0x3e4900=document[_0x156268(0x163)]('p');_0x3e4900[_0x156268(0x14d)]=_0x156268(0x182),_0x3e4900[_0x156268(0x139)]=_0x156268(0x19d),_0x20df40['appendChild'](_0x3e4900);const _0x5cf3a9=document['createElement']('p');_0x5cf3a9[_0x156268(0x14d)]=_0x156268(0x1bd),_0x5cf3a9['textContent']='\x22'+_0x4a4f30+'\x22',_0x20df40[_0x156268(0x137)](_0x5cf3a9);}async function displayClassificationResults(_0x3be6ea){const _0x491863=_0x1d2196,_0x496ff1=sessionStorage[_0x491863(0x13e)](_0x491863(0x178)),_0x23ba03=sessionStorage[_0x491863(0x13e)](_0x491863(0x13d)),_0x43a0b2=sessionStorage[_0x491863(0x13e)](_0x491863(0x1be));if(!_0x496ff1||!_0x23ba03||!_0x43a0b2||!_0x3be6ea){console[_0x491863(0x138)](_0x491863(0x1a7));return;}const _0x112439=await initiateItemNameProcess(_0x43a0b2),_0x2f8784=await initiateItemTagsProcess(_0x43a0b2),_0x5d9264=getRealItemDetails(_0x3be6ea);if(!_0x5d9264){console[_0x491863(0x138)](_0x491863(0x1b3));return;}const _0x38259c=document['querySelector'](_0x491863(0x1ad));_0x38259c['innerHTML']='';const _0x2598d0=document[_0x491863(0x163)]('p');_0x2598d0[_0x491863(0x1a6)]=_0x491863(0x144),_0x2598d0[_0x491863(0x168)]['fontWeight']=_0x491863(0x15a),_0x38259c[_0x491863(0x137)](_0x2598d0);const _0xd1029e=document['createElement'](_0x491863(0x15b));_0xd1029e['className']=_0x491863(0x1bf);const _0x297578=createItemBox(_0x491863(0x188),_0x496ff1,_0x23ba03,_0x112439,_0x43a0b2,_0x2f8784,!![]),_0x4c6c5c=createItemBox('Matched\x20Item',_0x496ff1,_0x23ba03,_0x5d9264[_0x491863(0x17f)],_0x3be6ea,_0x5d9264[_0x491863(0x18d)],![]);_0xd1029e['appendChild'](_0x297578),_0xd1029e[_0x491863(0x137)](_0x4c6c5c),_0x38259c[_0x491863(0x137)](_0xd1029e);const _0x5c226e=document['createElement']('p');_0x5c226e[_0x491863(0x139)]=_0x491863(0x1a3),_0x5c226e[_0x491863(0x168)]['color']=_0x491863(0x190),_0x38259c[_0x491863(0x137)](_0x5c226e);}function createItemBox(_0x597606,_0x3cb145,_0x558440,_0x1f91a3,_0xf31046,_0x162a0d,_0x34e4a3){const _0x5a256a=_0x1d2196,_0x121588=document[_0x5a256a(0x163)](_0x5a256a(0x15b));_0x121588[_0x5a256a(0x14d)]=_0x5a256a(0x17e);const _0x352658=_0x34e4a3?'color:\x20gray;':_0x5a256a(0x130);return _0x121588[_0x5a256a(0x1a6)]=_0x5a256a(0x1a5)+_0x597606+_0x5a256a(0x146)+_0x352658+_0x5a256a(0x142)+_0x3cb145+_0x5a256a(0x1a4)+_0x352658+_0x5a256a(0x183)+_0x558440+_0x5a256a(0x1a4)+_0x352658+_0x5a256a(0x148)+_0x1f91a3+_0x5a256a(0x169)+_0xf31046+_0x5a256a(0x1a4)+_0x352658+_0x5a256a(0x18f)+_0x162a0d['join'](',\x20')+_0x5a256a(0x198),_0x121588;}async function initiateItemNameProcess(_0x43d372){const _0x279f99=_0x1d2196,_0x378244=_0x279f99(0x1b9)+_0x43d372+'\x22.';try{const _0x1ca938=await fetch(_0x279f99(0x13f),{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x279f99(0x135)]({'message':_0x378244})}),_0x4671cc=await _0x1ca938[_0x279f99(0x134)]();return getItemNameFromResponse(_0x4671cc);}catch(_0x355a98){return console[_0x279f99(0x138)](_0x279f99(0x147),_0x355a98),null;}}function getItemNameFromResponse(_0x2bf5e3){const _0x4e00d8=_0x1d2196;if(_0x2bf5e3[_0x4e00d8(0x153)]&&_0x2bf5e3['choices'][0x0]&&_0x2bf5e3['choices'][0x0]['message']&&_0x2bf5e3[_0x4e00d8(0x153)][0x0][_0x4e00d8(0x1a8)][_0x4e00d8(0x14b)])return _0x2bf5e3[_0x4e00d8(0x153)][0x0][_0x4e00d8(0x1a8)]['content'][_0x4e00d8(0x145)]();return null;}async function initiateItemTagsProcess(_0x13b32e){const _0x46f6da=_0x1d2196,_0x329917='Please\x20provide\x20suitable\x20tags\x20for\x20the\x20following\x20item\x20description:\x20\x22'+_0x13b32e+'\x22.';try{const _0x46704d=await fetch(_0x46f6da(0x13f),{'method':_0x46f6da(0x180),'headers':{'Content-Type':_0x46f6da(0x150)},'body':JSON[_0x46f6da(0x135)]({'message':_0x329917})}),_0x56ee9f=await _0x46704d[_0x46f6da(0x134)]();return getItemTagsFromResponse(_0x56ee9f);}catch(_0x72ae5d){return console[_0x46f6da(0x138)](_0x46f6da(0x147),_0x72ae5d),[];}}function getItemTagsFromResponse(_0x1ae1a6){const _0x4094b3=_0x1d2196;if(_0x1ae1a6[_0x4094b3(0x153)]&&_0x1ae1a6[_0x4094b3(0x153)][0x0]&&_0x1ae1a6['choices'][0x0]['message']&&_0x1ae1a6[_0x4094b3(0x153)][0x0]['message']['content'])return _0x1ae1a6['choices'][0x0][_0x4094b3(0x1a8)]['content'][_0x4094b3(0x14a)](',')[_0x4094b3(0x196)](_0x1490c5=>_0x1490c5['trim']());return[];}async function retrieveItemDetails(_0xc00f43){const _0x4cfcca=_0x1d2196,_0x4c7fa9=await initiateItemNameProcess(_0xc00f43),_0x360ffa=await initiateItemTagsProcess(_0xc00f43);console[_0x4cfcca(0x133)](_0x4c7fa9,_0x360ffa);}function getRealItemDetails(_0x597ac0){const _0x1a80f7=_0x1d2196,_0x1dbdc3=sessionStorage['getItem']('categoryData');if(!_0x1dbdc3)return console[_0x1a80f7(0x138)](_0x1a80f7(0x1aa)),null;const _0x113026=JSON['parse'](_0x1dbdc3);for(const _0x10deb0 in _0x113026['Categories']){for(const _0xe88726 in _0x113026[_0x1a80f7(0x16b)][_0x10deb0]){const _0x4d0397=_0x113026[_0x1a80f7(0x16b)][_0x10deb0][_0xe88726][_0x1a80f7(0x18a)],_0x153883=_0x4d0397[_0x1a80f7(0x189)](_0x1f1742=>_0x1f1742['description']===_0x597ac0);if(_0x153883)return{'name':_0x153883[_0x1a80f7(0x17f)],'tags':_0x153883['tags']};}}return console[_0x1a80f7(0x138)](_0x1a80f7(0x197)),null;}